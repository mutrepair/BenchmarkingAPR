    while ((total = in.read(buffer, limit, buffer.length / limit)) != -1) {

